{% extends 'base.html' %}
{% load i18n %}
{% load static %}
{% load bootstrap4 %}
{% bootstrap_css %}
{% bootstrap_javascript jquery='full' %}

<div class="container wrapper flex-grow-1">
    <h1 class="my-4">{{ title }}</h1></div>

<table class="table table-striped">


    {% block content %}
    <div class="container wrapper flex-grow-1">
        <h1 class="my-4">{% trans 'Tasks' %}</h1>
        <h4><a href="{% url 'create_task' %}">{% trans 'Create task' %}</a></h4>
    </div>


    <div class="card mb-3 table-info table table-striped">
        <div class="card-body bg-light">
            <form class="form-inline center" method="get">
                <div class="form-group"><label for="id_status">{% trans 'Status' %}</label>
                    <div class="ml-2 mr-3"><select name="status" class="form-control" title="" id="id_status">
                        <option value="" selected="">---------</option>
                        {% for task in tasks %}
                        <option value="">{{ task.status }}</option>
                        {% endfor %}

                    </select></div>
                </div>
                <div class="form-group"><label for="id_executor">{% trans 'Executer' %}</label>
                    <div class="mr-3 ml-2"><select name="executor" class="form-control" title=""
                                                   id="id_executor">
                        <option value="" selected="">---------</option>
                        {% for task in tasks %}
                        <option value="">{{task.executor}}</option>
                        {% endfor %}


                    </select></div>
                </div>
                <div class="form-group"><label for="id_label">{% trans 'Label' %}</label>
                    <div class="mr-3 ml-2"><select name="label" class="form-control" title="" id="id_label">
                        <option value="" selected="">-----1---</option>

                        {% for label in tasks %}
                        {% for f in label.tasklabel_set.all %}
                         <option value="">{{ f.label }}</option>
                        {% endfor %}

<!--                        <option value="">{{  label.tasklabel_set.all }}</option>-->
                        {% endfor %}


                    </select></div>
                </div>
                <div class="form-group">
                    <div class="mr-3">
                        <div class="form-check"><input type="checkbox" name="self_tasks"
                                                       class="form-check-input" id="id_self_tasks"><label
                                class="form-check-label"
                                for="id_self_tasks">{% trans 'Only self tasks' %}</label></div>
                    </div>
                </div>

                <div class="form-group">
                    <input class="btn btn-primary" type="submit" value="{% trans 'Show' %}">
                </div>
            </form>
        </div>
    </div>

    <table class="table table-striped ">
        <thead>
        <tr class="table-info">
            <th scope="col">ID</th>
            <th scope="col">{% trans 'Name' %}</th>
            <th scope="col">{% trans 'Status' %}</th>
            <th scope="col">{% trans 'Author' %}</th>
            <th scope="col">{% trans 'Executor' %}</th>
            <th scope="col">{% trans 'Created at' %}</th>
            <th></th>
        </tr>
        </thead>
        <tbody>
        {% for task in tasks %}
        <tr>

            <td>{{task.id}}</td>
            <td><a href="{% url 'task' task.id %}">{{task.name}}</a></td>
            <td>{{ task.status }}</td>
            <td>{{ task.author}}</td>
            <td>{{task.executor}}</td>
            <td>{{task.created_at|date:"d.m.Y"}}</td>
            <td>
                <a href="{% url 'update_task' task.pk %}">{{btn_update}}</a>
                <br>
                <a href="{% url 'delete_task' task.pk %}">{{btn_delete}}</a>
            </td>
        </tr>
        {% endfor %}
        </tbody>
    </table>
    {% endblock %}
